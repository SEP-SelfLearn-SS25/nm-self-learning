/// Total time a user has spent learning across all courses 
view TotalLearningTime {
  id                        String  @unique
  username                  String
  totalTimeSeconds          Float
}

/// Daily learning time per user 
view DailyLearningTime {
  id                        String  @unique
  username                  String
  day                       DateTime
  totalTimeSeconds          Float 
}

/// Hourly learning time per user
view HourlyLearningTime {
  id                        String  @unique
  username                  String
  hour                      DateTime
  totalTimeSeconds          Float
}

/// Daily quiz statistics per user 
view DailyQuizStats {
  id                        String  @unique
  username                  String
  day                       DateTime
  totalAnswers              Int
  correctAnswers            Int
  incorrectAnswers          Int
  accuracyPercent           Float
}

/// Total learning time per course per user 
view TotalLearningTimeByCourse {
  id                        String  @unique
  username                  String
  courseId                  String
  courseTitle               String
  totalTimeSeconds          Float
}

/// Average completion rate per author per course 
view AverageCompletionRateByAuthorByCourse {
  id                        String  @unique
  authorUsername            String
  courseId                  String
  courseTitle               String
  totalEnrollments          Int
  completedEnrollments      Int
  completionRatePercent     Float
}

/// Average completion rate per author (across all courses) 
view AverageCompletionRateByAuthor {
  id                        String  @unique
  authorUsername            String
  averageCompletionPercent  Float
}

/// Average completion rate per author per subject 
view AverageCompletionRateByAuthorBySubject {
  id                        String  @unique
  authorUsername            String
  subjectId                 String
  subjectTitle              String
  totalCourses              Int
  totalEnrollments          Int?
  completedEnrollments      Int?
  completionRatePercent     Float?
}

/// Daily learning time per course per user 
view DailyLearningTimeByCourse {
  id                        String  @unique
  username                  String
  courseId                  String
  courseTitle               String?
  day                       DateTime
  totalTimeSeconds          Float
}

/// Learning streaks per user
view LearningStreak {
  id                        String  @unique
  username                  String
  longestStreakDays         Int
  currentStreakDays         Int
}

/// Number of courses completed per subject per user
view CoursesCompletedBySubject {
  id                      String    @unique
  username                String
  subjectId               String
  subject_title           String
  total_completed_courses Int
  completed_courses       String?
}

/// --- Metrics Views for Authors ---

view AuthorMetric_AverageCompletionRate {
  authorId                  String  @unique
  authorName                String
  usersStarted              Int
  usersFinished             Int
  averageCompletionRate     Float
}

view AuthorMetric_DailyAverageCompletionRate {
  authorId                  String  @unique
  authorName                String
  day                       DateTime
  usersStarted              Int
  usersFinished             Int
  averageCompletionRate     Float
}

view AuthorMetric_AverageCompletionRateByCourse {
  authorId                  String  @unique
  authorName                String
  courseId                  String
  courseTitle               String
  usersStarted              Int
  usersFinished             Int
  averageCompletionRate     Float
}

view AuthorMetric_DailyAverageCompletionRateByCourse {
  authorId                  String  @unique
  authorName                String
  courseId                  String
  courseTitle               String
  day                       DateTime
  usersStarted              Int
  usersFinished             Int
  averageCompletionRate     Float
}